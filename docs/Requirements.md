<h1 align = "center">需求分析</h1>  

## 一、用户需求

### 1. 目标用户群体
- 主要用户：
  * 科研人员和学术工作者
  * 研究生和大学生
  * 技术文档翻译人员
  * 科技文献阅读者

- 用户特征：
  * 经常需要阅读英文学术论文
  * 对翻译质量要求较高
  * 重视专业术语的准确性
  * 需要处理包含数学公式的文档


### 2. 用户场景
- 场景一：论文快速预览
  * 需求：快速了解论文主要内容
  * 特点：对翻译速度要求高，对格式要求相对较低

- 场景二：论文精读翻译
  * 需求：精确理解论文内容
  * 特点：对翻译准确度要求高，需要保留原文对照

- 场景三：批量论文处理
  * 需求：批量处理多篇相关论文
  * 特点：需要高效的批处理能力


## 二、系统需求

### 1. 功能性需求

#### 1.1 FR-INPUT: 文件输入与处理

* FR-INPUT-01: 系统必须能接收用户上传的标准 PDF 文件（符合 PDF 1.7 标准）。

* FR-INPUT-02: 系统必须支持用户选择单个或多个 PDF 文件进行处理。

* FR-INPUT-03: 系统应该提供文件拖拽上传的功能，以提升用户体验。

* FR-INPUT-04: 系统应该允许用户指定处理 PDF 文件中的特定页面范围。

* FR-INPUT-05: 系统应该能够处理扫描型的 PDF 文件（即图片PDF），通过 OCR 技术提取其中的文本。（注：此为高级功能，可能影响性能和准确度）

* FR-INPUT-06: 系统必须对输入文件进行基本验证（如：是否可读、非完全损坏）。

#### 1.2 FR-PARSE: 内容解析与识别

* FR-PARSE-01: 系统必须能够从 PDF 中准确提取文本内容。

* FR-PARSE-02: 系统必须能够识别并区分文档中的不同内容元素，至少包括：
    * 段落文本
    * 图像/图形区域
    * 表格区域
    * 数学公式区域

* FR-PARSE-03: 系统应该尝试理解文本的逻辑顺序，尤其是在多栏布局的页面中。

* FR-PARSE-04: 系统应该能识别页眉、页脚和页码，并允许用户选择是否在翻译中包含或排除它们。

* FR-PARSE-05: 系统应该能够识别表格的结构（行、列、单元格），并提取单元格内的文本。

* FR-PARSE-06: 系统应该能够识别数学公式区域。（注：识别其语义或转换为如 LaTeX 格式是高级目标）

* FR-PARSE-07: 系统应该能识别参考文献区域，并允许用户选择特定处理方式（如：不翻译）。

#### 1.3 FR-TRANSLATE: 翻译处理

* FR-TRANSLATE-01: 系统必须提供文本翻译功能，将从 PDF 提取的源语言文本翻译为用户指定的目标语言。

* FR-TRANSLATE-02: 系统必须支持集成多种外部翻译服务（如 Google, DeepL 等），并允许用户配置和选择使用哪种服务。

* FR-TRANSLATE-03: 系统必须允许用户配置翻译服务的认证信息（如 API Key）。

* FR-TRANSLATE-04: 系统应该提供选项，允许用户选择是否翻译特定类型的已识别元素（如：表格内的文本、图标题文本）。默认不翻译公式和图像本身。

* FR-TRANSLATE-05: 系统应该具备一定的错误处理能力，例如在翻译服务调用失败时进行重试或给出明确提示。


#### 1.4 FR-GENERATE: 输出文档生成

* FR-GENERATE-01: 系统必须能够生成包含翻译后文本以及原始非文本元素（图像、公式区域、表格区域等）的输出文档。

* FR-GENERATE-02: 系统必须支持生成 PDF 格式的输出文档。

* FR-GENERATE-03: 系统必须提供生成双语对照文档的选项（例如，原文和译文并排或段落交错）。

* FR-GENERATE-04: 系统必须提供生成纯译文文档的选项。

* FR-GENERATE-05: 系统应该在生成的文档中，尽可能保持内容元素（文本、图、表、公式）的相对顺序和基本布局结构，以保证可读性。（注：精确像素级还原布局是极高目标，此处强调可读性和结构）

* FR-GENERATE-06: 系统应该在生成的 PDF 中处理好多语言字符的正确显示（如嵌入所需字体子集）。

#### 1.5 FR-UI: 用户界面与交互

* FR-UI-01: 系统必须提供一个图形用户界面 (GUI) 作为主要交互方式。

* FR-UI-02: GUI 必须允许用户执行文件选择、配置翻译参数、启动翻译、查看进度和获取结果的操作。

* FR-UI-03: GUI 必须清晰地显示翻译过程的状态和反馈信息（如进度百分比、当前步骤、错误提示）。

* FR-UI-04: GUI 应该提供翻译结果的预览功能。（Could Have）

* FR-UI-05: 系统可以提供一个命令行界面 (CLI)，支持通过参数执行核心翻译功能。（Could Have）


### 2. 非功能性需求

#### 2.1 性能需求
- 响应时间：
  * 界面操作响应 < 100ms
  * 文件加载时间 < 3s（标准PDF）
  * 翻译处理速度 > 10页/分钟

- 资源占用：
  * CPU使用率 < 50%
  * 内存占用 < 1GB
  * 磁盘空间 < 500MB

#### 2.2 可靠性需求
- 稳定性：
  * 系统崩溃率 < 0.1%
  * 翻译成功率 > 99%
  * 24小时连续运行无异常

- 数据安全：
  * 本地数据加密存储
  * 翻译缓存安全清理
  * API密钥安全管理

#### 2.3 兼容性需求
- 系统兼容：
  * Windows 10/11

- 软件兼容：
  * Python 3.8+
  * PDF 1.7标准
  * UTF-8编码支持

#### 2.4 可维护性需求
- 代码规范：
  * PEP 8编码规范
  * 模块化设计
  * 完整的注释文档

- 测试覆盖：
  * 单元测试覆盖率 > 80%
  * 集成测试覆盖关键功能
  * 自动化测试支持


## 三、用户使用流程

### 1. GUI模式
1. 启动程序
2. 选择PDF文件（支持拖放）
3. 配置翻译参数（可选）
   - 选择翻译服务
   - 设置语言对
   - 设置输出格式
4. 点击开始翻译
5. 显示翻译进度
6. 完成后自动生成翻译文档

### 2. 命令行模式
1. 使用命令行参数指定配置
2. 执行翻译命令
3. 显示进度信息
4. 生成翻译文档


## 四、技术选型

#### 1. 核心技术栈
| 项目 | 技术选型 | 说明 |
|------|----------|------|
| 编程语言 | Python 3.11 | 主要开发语言 |
| GUI框架 | Gradio| 桌面界面开发 |
| PDF处理 | PyMuPDF (fitz) | PDF解析和处理 |
| 翻译服务 | 多服务集成 | 支持多种翻译API |
| 文档生成 | reportlab | PDF文档生成 |
| 打包工具 | PyInstaller | 生成可执行文件 |

#### 2. 依赖库
- 文档处理：PyMuPDF, reportlab
- 网络请求：requests, aiohttp
- 数据处理：numpy, pandas
- 缓存系统：SQlite
- 配置管理：pyyaml